(function(){var a,b,c,d=[].slice;c=function(a,b,c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(c=c||{},n=function(a){return a.length>0},g=function(a){if(!("object"==typeof a||a instanceof Array))throw new Error("Value must be either an object or an Array of objects which conform to a minimal element query interface")},f=function(b){return a.$.Selector.toQueryObj(b)},e=function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b===d)return c;return-1},m=function(a,b){return a.indexOf(b)},a.$.indexOf=Array.prototype.indexOf?m:e,a.$.Model=a.Model,a.$.Selector=c,a.$.Request=c,a.$.Promise=c,a.$.Extender=c.fn,a.$.textFieldValue=function(b,c){var d,e,f,g;return g=c.init,f=function(){return b.val()||""},d=function(){return a.interval(c.interval||50).take(c.take||10).map(f).filter(n).take(1)},e=b.asEventStream("keyup input").merge(b.asEventStream("cut paste").delay(1)).merge(d()),a.Binding({initValue:g,get:f,events:e,set:function(a){return b.val(a)}})},a.$.checkBoxValue=function(b,c){var d;return d=c.init,a.Binding({initValue:d,get:function(){return b.prop("checked")||!1},events:b.asEventStream("change"),set:function(a){return b.prop("checked",a)}})},a.$.selectValue=function(b,c){var d;return d=c.init,a.Binding({initValue:d,get:function(){return b.val()},events:b.asEventStream("change"),set:function(a){return b.val(a)}})},a.$.radioGroupValue=function(b,c){var d;return d=c.init,g(b),b=a.$.asQueryObject(b),a.Binding({initValue:d,get:function(){return b.filter(":checked").first().val()},events:b.asEventStream("change"),set:function(c){return b.each(function(b,d){return a.$.Selector(d).prop("checked",d.value===c)})}})},a.$.intRadioGroupValue=function(b,c){var d,e;return d=c.init,e=a.$.radioGroupValue(b),a.Binding({initValue:d,get:function(){var a;return a=e.get(),null!=a?parseInt(a):a},events:e.syncEvents(),set:function(a){var b;return b=null!=a?Number(a).toString():a,e.set(b)}})},a.$.checkBoxGroupValue=function(b,d){var e;return e=d.init,g(b),b=f(b),a.Binding({initValue:e,get:function(){return b.filter(":checked").map(function(b,c){return a.$.Selector(c).val()}).toArray()},events:b.asEventStream("change"),set:function(d){return b.each(function(b,e){return c(e).prop("checked",a.$.indexOf(d,a.$.Selector(e).val())>=0)})}})},a.$.ajax=function(b,c){return a.fromPromise(a.$.Request.ajax(b),c)},a.$.ajaxGet=function(b,c,d,e){return a.$.ajax({url:b,dataType:d,data:c},e)},a.$.ajaxGetJSON=function(b,c,d){return a.$.ajax({url:b,dataType:"json",data:c},d)},a.$.ajaxPost=function(b,c,d,e){return a.$.ajax({url:b,dataType:d,data:c,type:"POST"},e)},a.$.ajaxGetScript=function(b,c){return a.$.ajax({url:b,dataType:"script"},c)},a.$.lazyAjax=function(b){return a.once(b).flatMap(a.$.ajax)},a.Observable.prototype.ajax=function(){return this.flatMapLatest(a.$.ajax)},a.Observable.prototype.toDeferred=function(){var b,d;return d=void 0,b=a.$.Promise.deferred()||c.Deferred(),this.take(1).endOnError().subscribe(function(a){return a.hasValue()?(d=a.value(),b.notify(d)):a.isError()?b.reject(a.error):a.isEnd()?b.resolve(d):void 0}),b},k=["keydown","keyup","keypress","click","dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","mouseout","mouseover","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","resize","scroll","select","change","submit","blur","focus","focusin","focusout","load","unload"],l={},o=function(a){return l[a+"E"]=function(){var b;return b=1<=arguments.length?d.call(arguments,0):[],this.asEventStream.apply(this,[a].concat(d.call(b)))}},q=0,s=k.length;s>q;q++)h=k[q],o(h);for(i=["animate","show","hide","toggle","fadeIn","fadeOut","fadeTo","fadeToggle","slideDown","slideUp","slideToggle"],j={},p=function(b){return j[b+"E"]=function(){var c;return c=1<=arguments.length?d.call(arguments,0):[],a.fromPromise(this[b].apply(this,c).promise())}},r=0,t=i.length;t>r;r++)h=i[r],p(h);return a.$.Extender&&(a.$.Extender.extend(l),a.$.Extender.extend(j),a.$.Extender.asEventStream=a.$.asEventStream),a.$},"undefined"!=typeof module&&null!==module?(a=require("baconjs"),b=require("bacon.model"),module.exports=c(a,b,$)):"function"==typeof define&&define.amd?define(["bacon","bacon.model",$],c):c(this.Bacon,this.BaconModel,this.$)}).call(this);